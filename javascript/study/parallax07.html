<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>자바스크립트 : 패럴랙스 이펙트07</title>
        <link rel="stylesheet" href="../assets/css/style.css" />
        <link rel="stylesheet" href="../assets/css/dracula.css" />
    </head>

    <body>
        <main id="main">
            <div class="document">
                <h2 class="t_tit">parallaxEffect07</h2>
                <p class="t_desc2">패럴랙스 이펙트07 - 리빌 효과</p>

                <hr />

                <div class="t_iframe" style="min-height: 650px; padding-top: 0">
                    <iframe src="https://sukjun2.github.io/coding2/javascript/effect/parallaxEffect07.html" frameborder="0"></iframe>
                </div>

                <div class="t_link" style="display: flex">
                    <a href="https://github.com/sukjun2/coding2/blob/main/javascript/effect/parallaxEffect07.html">원본 소스 보기</a>
                    <a href="https://sukjun2.github.io/coding2/javascript/effect/parallaxEffect07.html">원본 사이트 보기</a>
                </div>

                <h3 class="t_tit2">JAVASCRIPT</h3>
                <p class="t_box">
                    reveal 선택자를 선언하고 reveal 클래스를 가진 태그의 자식중, 텍스트가 있는 자식만 골라서 span으로 글씨가 쪼개지도록 합니다.<br />
                    if 엘리먼트값에 텍스트가 있다면, forEach문을 통해 span태그로 한글자씩 텍스트를 쪼개줍니다.<br />
                    reveal 효과를 위해 스크롤 높이값에 따라 class를 부여, 엘리먼트에 부여한 data-delay값을 가져와<br />
                    글과 이미지의 애니메이션 시간에 차이를 둬 줍니다.
                </p>
                <div class="t_code">
                    <pre><code class="language-js">const reveal = document.querySelectorAll(".reveal");

// reveal 클래스 자식에 글씨가 있다면, 가상으로 span태그를 만들어서 넣어주세요!

reveal.forEach((el) => {
    let spanText = el.innerText;
    if (spanText) {
        el.innerHTML = "&lt;span>" + spanText + "&lt;/span>";
    }
});

function scroll() {
    let scrollTop = window.scrollY;

    reveal.forEach((el) => {
        let revealOffset = el.offsetTop + el.parentElement.offsetTop;
        let revealDelay = el.dataset.delay;

        // if (scrollTop > revealOffset - window.innerHeight) {
        //     el.classList.add("show");
        // }

        if (scrollTop >= revealOffset - window.innerHeight) {
            if (revealDelay == undefined) {
                el.classList.add("show");
            } else {
                setTimeout(() => {
                    el.classList.add("show");
                }, revealDelay);
            }
        }
    });
    document.querySelector("#parallax__info .scroll span").innerText = Math.round(scrollTop);
    requestAnimationFrame(scroll);
}
scroll();
</code></pre>
                </div>
            </div>
        </main>
        <!-- //main -->

        <footer id="footer">
            <a href="mailto:tjrwns3650@gmail.com">tjrwns3650@gmail.com</a>
        </footer>
        <!-- //footer -->

        <script src="../assets/js/highlight.min.js"></script>
        <script>
            hljs.highlightAll();
        </script>
    </body>
</html>
